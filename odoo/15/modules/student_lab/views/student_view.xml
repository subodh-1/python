<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <!-- Form View 1 Of Student's Profiles -->
    <record id="view_student_student_form_1" model="ir.ui.view">
        <field name="name">student.student.form.1</field>
        <field name="model">student.student</field>
        <field name="arch" type="xml">
            <form string="Student Information">
                <!--
                <header>
                    <button class="oe_stat_button" name="set_alumni" string="Alumni" type="object" icon="fa-archive" />
                </header>
                -->
                <sheet>
                    <field name="state" invisible="1"/>
                    <div class="oe_inline">
                        <newline />
                        <group>
                            <group>
                                <field name="simulab_id"  class="oe_read_only" groups="simulab.group_simulab_administration" />
                                <field name="name" placeholder="Name" required="1" />
                            </group>
                        </group>

                        <br />
                        <field name="photo" widget="image" invisible="1" class="oe_avatar oe_left oe_read_only"
                            style="max-width:100px;max-height:117px;" />
                    </div>
                    <group>
                        <group>
                            <field name="mobile" placeholder="Mobile Number" />
                            <field name="phone" placeholder="Phone Number" />


                            <field name="email" placeholder="Email Address" String="Email"
                                widget="email" />

                            <field name="email_otp" invisible="1" />
                            <label for="email_verified" attrs="{'invisible': [('email', '=', False)]}"/>
                            <div attrs="{'invisible': [('email', '=', False)]}" >
                                <field name="email_verified" class="oe_inline" readonly="1" />
                                <button string="Verify Email" class="oe_highlight" type="object"
                                    name="send_verification_email"
                                    confirm="email-OTP will be sent on this email-id. Do you want to proceed?"
                                    attrs="{'invisible': ['|',('email_verified', '=', True), ('email_otp', '!=', False)]}" />
                            </div>

                            <label for="user_email_otp"
                                attrs="{'invisible': ['|','|',('email', '=', False),('email_verified', '=', True), ('email_otp', '=', False)]}" />
                            <div>
                                <field name="user_email_otp"
                                    placeholder="Enter OTP sent on your email id" String="Email OTP"
                                    attrs="{'invisible': ['|','|',('email', '=', False),('email_verified', '=', True), ('email_otp', '=', False)]}" />
                                <button string="Verify Email OTP" class="oe_highlight"
                                    style="margin:10pt" type="object" name="verify_email_otp"
                                    attrs="{'invisible': ['|','|',('email', '=', False),('email_verified', '=', True), ('email_otp', '=', False)]}" />
                                <button string="Resend Email OTP" class="oe_highlight" type="object"
                                    name="send_verification_email"
                                    attrs="{'invisible': ['|','|',('email', '=', False),('email_verified', '=', True), ('email_otp', '=', False)]}" />
                            </div>

                            <field name="school_id" placeholder="School"
                                groups="simulab.group_simulab_administration" />
                            <field name="login" class="oe_read_only" />
                            <field name="standard_id" widget="selection" />
                            <field name="city_id" />
                            <field name="city_name" invisible="1"/>
                            <field name="other_city" attrs="{'invisible':[('city_name', '!=','Other')]}" />
                        </group>
                        <group>
                            <field name="gender" />
                            <field name="date_of_birth" />
                            <field name="exams_id" />
                            <field name="institute_id" />
                            <field name="institute_id_name" invisible="1"/>
                            <field name="other_institute" attrs="{'invisible':[('institute_id_name', '!=','Other')]}" />
                            <field name="institute_id_name" invisible="1"/>
                            <field name="board_id_name" invisible="1"/>
                            <field name="board_id" />
                            <field name="country_id" options="{'no_create': True, 'no_open': True}" />
                            <field name="other_board" attrs="{'invisible':[('board_id_name', '!=','Other')]}" />
                            <field name="medium_id_name" invisible="1"/>
                            <field name="medium_id"/>
                        </group>
                    </group>
                <separator/>

                    <group string="Enrolled Courses"  attrs="{'invisible': [('course_lines', '=', [])]}">
                        <field name="course_lines" nolabel="1" colspan="4" readonly="1">
                            <tree string="Enrolled Courses">
                                <field name="course_id" />
                                <field name="price" />
                                <field name="discounted_price" />
                                <field name="price_valid_date" />
                                <field name="purchased_price" />
                                <field name="trial_package" />
                                <field name="owner" />
                            </tree>
                        </field>
                    </group>

                    <group  colspan="4" col="4">
                        <group colspan="2" col="2">
                            <field name="quiz_correct_answers" />
                            <field name="quiz_attempted_questions" />
                            <field name="quiz_attempted" />
                            <field name="total_quizes" />
                            <field name="experiment_completed" />
                            <field name="total_experiments" />
                        </group>

                        <group colspan="2" col="2">
                            <field name="experiment_completed" />
                            <field name="exp_completed_ontime" />
                            <field name="exp_overdue" />
                            <field name="quiz_completed" />
                            <field name="quiz_completed_ontime" />
                            <field name="quiz_passed" />
                            <field name="quiz_failed" />
                            <field name="quiz_overdue" />
                        </group>
                    </group>


                    <group string="Student Subscriptions"  attrs="{'invisible': [('subscription_ids', '=', [])]}">
                        <field name="subscription_ids" nolabel="1" string="Transaction Details" colspan="4" readonly="1"
                            attrs="{'invisible': [('subscription_ids', '=', [])]}">
                            <tree string="Subscription Transactions" decoration-success="payment_status=='success'"
                                decoration-danger="payment_status=='failed'" decoration-warning="payment_status=='inprocess'"
                                decoration-info="payment_status=='refunded'">
                                <field name="transaction_id" class="oe_read_only"  optional="hide"/>
                                <field name="payment_order_id" class="oe_read_only"/>
                                <field name="total_amount" class="oe_read_only"/>
                                <field name="write_date" class="oe_read_only"/>
                                <field name="payment_status"/>

                                <field name="payment_source" class="oe_read_only"  optional="hide"/>
                                <field name="course_id" class="oe_read_only"/>
                                <field name="student_id" class="oe_read_only"/>
                                <field name="school_id" class="oe_read_only"/>
                                <field name="razorpay_status" class="oe_read_only"  optional="hide"/>
                                <field name="razorpay_order_id" class="oe_read_only"  optional="hide"/>
                                <field name="server_pre_response" optional="hide"/>
                                <field name="server_post_response" optional="hide"/>
                            </tree>
                        </field>
                    </group>

                    <group string="School Classes"  attrs="{'invisible': [('class_ids', '=', [])]}">
                        <field name="class_ids" nolabel="1" colspan="4" readonly="1">
                            <tree string="School Classes">
                                <field name="school_id" />
                                <field name="standard_id" />
                                <field name="division_id" />
                            </tree>
                        </field>
                    </group>

                    <!--
                    <notebook colspan="4" class="oe_read_only" >
                        <page string="Enrolled Courses" name="courses">
                            <field name="course_lines" nolabel="1" colspan="4" readonly="1">
                                <tree string="Enrolled Courses">
                                    <field name="course_id" />
                                    <field name="price" />
                                    <field name="discounted_price" />
                                    <field name="price_valid_date" />
                                    <field name="price_desc" />
                                    <field name="trial_package" />
                                </tree>
                            </field>
                        </page>
                        <page string="Institutes/Schools" name="school" invisible="1">
                            <field name="school_ids" nolabel="1" colspan="4" readonly="1">
                                <tree string="Institutes/Schools">
                                    <field name="name" />
                                    <field name="school_code" />
                                    <field name="city" />
                                    <field name="state_id" string="State"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                    -->
                </sheet>
            </form>
        </field>
    </record>
    <!-- Tree View 1 Of Student's Profiles -->
    <record id="view_student_student_tree_1" model="ir.ui.view">
        <field name="name">student.student.tree.1</field>
        <field name="model">student.student</field>
        <field name="arch" type="xml">
            <tree string="Student Information">
                <field name="simulab_id"  class="oe_read_only" groups="simulab.group_simulab_administration" />
                <field name="name" />
                <field name="login" />
                <field name="mobile" />
                <field name="gender" />
                <field name="email" />
                <field name="school_id" />
            </tree>
        </field>
    </record>
    <!-- Search View 1 Of Student's Profiles -->
    <record id="view_student_student_search_1" model="ir.ui.view">
        <field name="name">student.student.search.1</field>
        <field name="model">student.student</field>
        <field name="arch" type="xml">
            <search string="Student Information">
                <group col="10" colspan="4">
                    <field name="mobile" />
                    <field name="simulab_id"  class="oe_read_only" />
                    <field name="name" />
                    <field name="user_id" />
                    <field name="email" />
                    <field name="school_id" placeholder="School"/>
                </group>
                <newline />
                <group expand="0" string="Group By..." colspan="12" col="10">
                    <filter name="class" string="Class" help="By Class" context="{'group_by':'standard_id'}" />
                    <filter name="gender" string="Gender" help="By Gender" context="{'group_by':'gender'}" />
                    <filter name="name" string="Name" help="By Class" context="{'group_by':'name'}" />
                    <filter name="school" string="School" help="By School" context="{'group_by':'school_id'}" />
                </group>
                <separator/>
                <filter name="alumni" string="Alumni" domain="[('state','=', 'alumni')]" help="Admission In Confirm State"/>
            </search>
        </field>
    </record>
    <!-- Kanban View Of Student's Profiles -->
    <record id="student_student_kanban_view" model="ir.ui.view">
        <field name="name">Student KANBAN</field>
        <field name="model">student.student</field>
        <field name="arch" type="xml">
            <kanban default_group_by="standard_id" >
                <field name="color"/>
                <field name="id"/>
                <field name="name"/>
                <field name="email"/>
                <templates>
                    <t t-name="kanban-box">
                        <t t-set="color" t-value="kanban_color(record.color.raw_value || record.name.raw_value)" />
                        <div t-att-class="color + (record.color.raw_value == 1 ? ' oe_kanban_color_alert' : '')">
                            <div class="oe_kanban_box oe_kanban_color_border">
                                <div class="oe_kanban_box_header oe_kanban_color_bgdark oe_kanban_color_border oe_kanban_draghandle">
                                    <table class="oe_kanban_table">
                                        <tr>
                                            <td class="oe_kanban_title1" align="left" valign="middle" style="padding-left:10px;">
                                                <h4>
                                                    <a type="open">
                                                        <field name="name" />
                                                        <field name="standard_id"/>
                                                        <field name="school_id" />
                                                        <field name="gender" />
                                                    </a>
                                                </h4>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="oe_kanban_box_content oe_kanban_color_bglight oe_kanban_box_show_onclick_trigger oe_kanban_color_border">
                                    <table class="oe_kanban_table">
                                        <tr width="300">
                                            <td valign="top" width="64" align="left">
                                                <a type="open">
                                                    <img heigh="80" width="80" t-att-src="kanban_image('student.student', 'photo', record.id.raw_value)" alt="image"/>
                                                </a>
                                            </td>
                                            <td valign="top" align="left" style="padding-left:10px;">
                                                <table>
                                                    <tr>
                                                        <td>Student ID :</td>
                                                        <td style="padding-left:10px;">
                                                            <b>
                                                                <field name="simulab_id"  class="oe_read_only" groups="simulab.group_simulab_administration" />
                                                            </b>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>Standard : </td>
                                                        <td style="padding-left:10px;">
                                                            <b>
                                                                <field name="standard_id" />
                                                            </b>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <center>
                                                    <b>
                                                        <field name="gender" />
                                                    </b>
                                                </center>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="oe_kanban_buttons_set oe_kanban_color_border oe_kanban_color_bglight oe_kanban_box_show_onclick">
                                    <div class="oe_kanban_left">
                                        <a role="button" string="Edit" title="Edit" class="btn btn-sm btn-default fa fa-pencil" type="edit" groups="simulab.group_school_administration"/>
                                        <a role="button" string="Change Color" icon="color-picker" type="color" name="color" />
                                    </div>
                                    <br class="oe_kanban_clear" />
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Action Of Form, Tree & Kanban Views Of Student Information -->
    <record id="action_student_student_form_12" model="ir.actions.act_window">
        <field name="name">Students</field>
        <field name="res_model">student.student</field>
         <field name="view_id" ref="" />
        <field name="view_mode">tree,kanban,form</field>
    </record>

    <!-- Action of Alumni state -->
    <record id="action_student_alumni" model="ir.actions.act_window">
        <field name="name">Student Alumni</field>
        <field name="domain">[('active','=',False)]</field>
        <field name="res_model">student.student</field>
        <field name="view_mode">tree,kanban,form</field>
    </record>

</odoo>
